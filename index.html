<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Firebase Google Login Demo</title>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  
  <script>
    // Firebase 初期設定
    const firebaseConfig = {
      apiKey: "AIzaSyAn-XGz8iAtjxuN39SheOaF9nQf2LuCYYM",
      authDomain: "wakana-town-site.firebaseapp.com",
      projectId: "wakana-town-site",
      storageBucket: "wakana-town-site.firebasestorage.app",
      messagingSenderId: "939136744820",
      appId: "1:939136744820:web:2e9ba9eb77288a684a4021",
      measurementId: "G-Z6VWWHKPFV"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

<script>
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');

  // Googleログイン
  loginBtn.addEventListener('click', () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    firebase.auth().signInWithPopup(provider)
      .then((result) => {
        console.log("✅ ログイン成功", result.user);
      })
      .catch((error) => {
        console.error("❌ Googleログイン中にエラー:", error);
        alert(error.message);
      });
  });

  // ログアウト
  logoutBtn.addEventListener('click', () => {
    firebase.auth().signOut().then(() => {
      console.log("✅ ログアウトしました");
    });
  });

  // 状態変化に応じてボタン表示切替
  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      loginBtn.style.display = "none";
      logoutBtn.style.display = "inline-block";
    } else {
      loginBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
    }
  });
</script>
  
</head>
<body>
<!-- ログインボタン -->
<button id="loginBtn">Googleでログイン</button>
<!-- ログアウトボタン -->
<button id="logoutBtn" style="display:none;">ログアウト</button>
</body>
</html>
